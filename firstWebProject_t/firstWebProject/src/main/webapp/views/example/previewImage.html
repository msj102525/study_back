<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>first : sample</title>
<script type="text/javascript" src="/first/resources/js/jquery-3.7.0.min.js"></script>
<script type="text/javascript">
window.onload = function(){
	//선택한 사진파일 이미지 미리보기 처리
	var photofile = document.getElementById("myphoto");
	photofile.addEventListener('change', function(event){		
		const files = event.currentTarget.files;
	    const file = files[0];
	    const previewImg = document.getElementById("photo");	    
	    console.log(file.name);
	    
	    const reader = new FileReader();
        reader.onload = (e) => {          
        	previewImg.setAttribute('src', e.target.result);
        	previewImg.setAttribute('data-file', file.name);
        };
        reader.readAsDataURL(file);    
	});
}
</script>
</head>
<body>
<h1>이미지 파일 첨부시 미리보기 처리와 전송 처리</h1>
<hr>
<form action="/first/exinsert" method="post" enctype="multipart/form-data">
	이름 : <input type="text" name="username"> <br>
	성별 : <input type="radio" name="gender" value="M"> 남자 &nbsp; 
		 <input type="radio" name="gender" value="F"> 여자 <br>
	나이 : <input type="number" name="age" min="19"> <br>
	사진 : <input type="file" name="myphoto" id="myphoto"> <br>
		  <div id="previewbox" 
		  style="width:170px;height:220px;border:1px solid black;padding:10px;margin:10px;">
		  	<img id="photo" src="/first/resources/example_files/preview.jpg" 
		  	width="150" height="200" align="center" style="position:relative;left:10px;top:10px;">
		  </div> <br>
		  <input type="submit" value="전송하기">		
</form>
</body>
</html>