<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>first</title>
<style type="text/css">
h1 {
	font-size: 48pt;
	color: navy;
}

div {
	width: 500px;
	height: 200px;
	border: 2px solid navy;
	position: relative;
	left: 200px;
}

div form {
	font-size: 16pt;
	color: navy;
	font-weight: bold;
	margin: 10px;
	padding: 10px;
}

div#loginForm form input.pos {
	position: absolute;
	left: 120px;
	width: 300px;
	height: 25px;
}

div#loginForm form input[type=submit] {
	margin: 10px;
	width: 250px;
	height: 40px;
	position: absolute;
	left: 120px;
	background: navy;
	color: white;
	font-size: 16pt;
	font-weight: bold;
}
</style>
<script type="text/javascript" src="/first/resources/js/jquery-3.7.0.min.js"></script>
<script src="/first/resources/js/kakao.min.js"></script>
<script>
	//ë°ê¸ë°ì í¤ ì¤ javascriptí¤ë¥¼ ì¬ì©í´ì¤ë¤.
	Kakao.init('0874d4b0d4aba7c91a4fb77d9a303727');
	console.log(Kakao.isInitialized()); // sdkì´ê¸°íì¬ë¶íë¨
	//ì¹´ì¹´ì¤ë¡ê·¸ì¸
	function kakaoLogin() {
		Kakao.Auth.login({
			success : function(response) {				
				Kakao.API.request({
					url : '/v2/user/me',
					success : function(response) {
						console.log(response)
					},
					fail : function(error) {
						console.log(error)
					},
				})
			},
			fail : function(error) {
				console.log(error);				
			},
		})
	}
	
	//ì¹´ì¹´ì¤ë¡ê·¸ìì  
	function kakaoLogout() {
	    if (Kakao.Auth.getAccessToken()) {
	      Kakao.API.request({
	        url: '/v1/user/unlink',
	        success: function (response) {
	        	console.log(response)
	        },
	        fail: function (error) {
	          console.log(error)
	        },
	      })
	      Kakao.Auth.setAccessToken(undefined)
	    }
	  }  
</script>
</head>
<body>
	<h1>first ë¡ê·¸ì¸</h1>
	<div id="loginForm">
		<!-- action="ìë²ì¸¡ì input ê° ì ì¡ë°ì ìë¸ë¦¿í´ëì¤ ì´ë¦"
		ì¹ììë ë·°ê° ì°ê²°í  ì»¨í¸ë¡¤ë¬ í´ëì¤ëªì ì£¼ë¡ ë§¤íí´ì
		url ììì ë³´ì¬ì§ ê°ì§ì´ë¦ì ì¬ì©í¨ 
		ì£¼ì : ëª¨ë  ìë¸ë¦¿ ì»¨í¸ë¡¤ë¬ë root ìì ì¤íëê² í´ì¼ í¨
		content-directory(webapp) ê° root ì
		url ìììë context-root ëªì¼ë¡ ë§¤íí´ ëìì.
		action ìë ìëê²½ë¡, ì ëê²½ë¡ ë ë¤ ì¬ì©í  ì ìì
		íì¬ ì´ loginPage.html ì webapp/views/member ì ìì
		ìëê²½ë¡ : action="../../login"
		ì ëê²½ë¡ : action="/context-rootëª/ìë¸ë¦¿ë§¤íì´ë¦"
				action="/first/login"
	-->
		<!-- <form action="../../login" method="post"> -->
		<form action="/first/login" method="post">
			<label>ìì´ë : <input type="text" name="userid" id="uid"
				class="pos"></label> <br> <label>ì í¸ : <input
				type="password" name="userpwd" id="upwd" class="pos"></label> <br>
			<input type="submit" value="ë¡ê·¸ì¸">
		</form>
	</div>
	<hr>
	<center>	
		<H4>ì´ë¯¸ì§ í´ë¦­ì ì ì¡ì¨ í í°ê³¼ ì ë³´ íì¸</H4>	
		<img src="/first/resources/images/kakao_login.png" 
		onclick="kakaoLogin();"> <br>
		<button onclick="kakaoLogout();">ì¹´ì¹´ì¤ ë¡ê·¸ìì</button>
	</center>
	<center>	
	<H4>ë±ë¡ë ì¹´ì¹´ì¤ê³ì ì¼ë¡ ë¡ê·¸ì¸ ìë¸ë¦¿ì¼ë¡ ì°ê²° ì²ë¦¬</H4>
	<h6>ì¹´ì¹´ì¤ ê°ë°ì ì¬ì´í¸ ê³ì ê´ë¦¬ìì ë¡ê·¸ììíë©´, ì¹´ì¹´ì¤ ë¡ê·¸ì¸ í¼ì´ ëíë¨</h6>
	<a href="https://kauth.kakao.com/oauth/authorize?client_id=0874d4b0d4aba7c91a4fb77d9a303727&redirect_uri=http://localhost:8088/first/kakaologin&response_type=code">	
		<img src="/first/resources/images/kakao_login.png">
	</a> 
	</center>
	<center>	
	<H4>ë¤ë¥¸ ê³ì ì¼ë¡ ë¡ê·¸ì¸ ìë¸ë¦¿ì¼ë¡ ì°ê²° ì²ë¦¬</H4>
	<h6>ì¹´ì¹´ì¤ ë¡ê·¸ì¸ í¼ì´ ëíë¨</h6>
	<!-- í¬í¸ë²í¸, context-rootëª, ìë¸ë¦¿ url-mapping, ìë°ì¤í¬ë¦½í¸ ì± í¤ ë³ê²½ íìí¨ -->
	<a href="https://accounts.kakao.com/login?continue=https%3A%2F%2Fkauth.kakao.com%2Foauth%2Fauthorize%3Fresponse_type%3Dcode%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8088%252Ffirst%252Fkakaologin%26client_id%3D0874d4b0d4aba7c91a4fb77d9a303727">	
		<img src="/first/resources/images/kakao_login.png">
	</a> 
	</center>
<hr>
<a href="https://developers.kakao.com/docs/latest/ko/kakaologin/common">
ì¹´ì¹´ì¤ ë¡ê·¸ì¸ ì¤ëª íì´ì§ë¡ ì´ë</a>
<br>
<p>
ì¤í íë¦ : <br>
ì¹´ì¹´ì¤ ë¡ê·¸ì¸ ì´ë¯¸ì§ í´ë¦­ 
&gt; ì¬ì´í¸ìì ì¹´ì¹´ì¤ ë¡ê·¸ì¸ ì°½ ë³´ì¬ì§
&gt; í´ë¼ì´ì¸í¸ê° ë¡ê·¸ì¸ ì ë³´ ìë ¥  
&gt; ë¡ê·¸ì¸ ìì²­  
&gt; ëì í­ëª© ì²´í¬  
&gt; ì¹´ì¹´ì¤ API ìë²ë¡ ëê²¨ì§  
&gt; ì¹´ì¹´ì¤ ìë²ë ì ë¬ë°ì ë°ì´í° ìë³íê³  í´ë¼ì´ì¸í¸ìê² í í° ë°ê¸
&gt; ë°ê¸ë í í°ì íì©íì¬ ë¡ê·¸ì¸ ì½ë ìì±í¨
</p>
<HR>
<P>
ì íë¦¬ì¼ì´ì ì¤ì  : <BR>
1. íìê°ì : https://developers.kakao.com/<br>
2. ë´ ì íë¦¬ì¼ì´ì &gt; ì íë¦¬ì¼ì´ì ì¶ê°íê¸° (ììëë¡ ìì±) 
&gt; ì ì¥ <br>
3. ìì±ë ì± í´ë¦­ &gt; íë«í¼ í´ë¦­ &gt; url ë±ë¡ 
(http://localhost:í¬í¸ë²í¸) <br>
4. url ë±ë¡ í Redirect URI ë±ë¡ : ë±ë¡íë¬ ê°ê¸° (íì: ë±ë¡í´ì¼ ì¬ì©í  ì ìì)
<br> íì±í ì¤ì  ON ì¼ë¡ ë°ê¿<BR>
* redirect uri : http://localhost:í¬í¸ë²í¸/context-rootëª/ë¡ê·¸ì¸-url-mapping
<br>
ìë¥¼ ë¤ë©´, http://localhost:8080/first/login<br>
http://localhost:8080/first/logout
<br>
ë¡ê·¸ììì© uri ë ë±ë¡í¨ : <br>
redirect uri : http://localhost:í¬í¸ë²í¸/context-rootëª/ë¡ê·¸ìì-url-mapping
5. (ì íì¬í­)ì íì¤ì  &gt; ëìí­ëª© 
&gt; íìí ëìí­ëª© ì¤ì í¨ (ì»¨í¸ë¡¤ë¬ë¡ ì ë¬ëë ê°ì´ ë¨.)<BR>
6. ì±í¤ìì JavaScript í¤ë¥¼ ë³µì¬í¨ <br>
<br>
7. ë·° íì´ì§ ìì± : ì¹´ì¹´ì¤ ë¡ê·¸ì¸ ë²í¼ ë§ë¤ê¸°<br>
8. ìë°ì¤í¬ë¦½í¸ì© : ì¬ì©í  ì¹´ì¹´ì¤ ë¡ê·¸ì¸ì© ìë°ì¤í¬ë¦½í¸ ìì¤ ì¶ê°í¨ <br>
cdnë°©ì : https://developers.kakao.com/sdk/js/kakao.js<br>
sdk ë¤ì´ë°ê¸° : https://developers.kakao.com/docs/latest/ko/sdk-download/js <br>
src="/first/resources/js/kakao.min.js" ë¡ javascript íê·¸ ìì±í¨<br>
<br>
ìë²ì¸¡ ì»¨í¸ë¡¤ë¬ë¡ ì°ê²° ìì²­ì : <br>
ë²í¼ ëë ì´ë¯¸ì§ í´ë¦­ì ì¤ì  url ì ìëì ê°ì´ ìì±í¨ <br>
https://kauth.kakao.com/oauth/authorize?
client_id=ìë°ì¤í¬ë¦½í¸ì±í¤&
redirect_uri=ë±ë¡ë ë¡ê·¸ì¸ì© redirect uri ìë ¥
&response_type=code <br>
9. ë¡ê·¸ìì ì»¨í¸ë¡¤ë¬ ì°ê²°ì : <br>
https://kauth.kakao.com/oauth/authorize?
client_id=ìë°ì¤í¬ë¦½í¸ì±í¤&
redirect_uri=ë±ë¡ë ë¡ê·¸ììì© redirect uri ìë ¥
&response_type=code
</P>	
	
</body>
</html>